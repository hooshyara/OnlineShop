{% extends '_base.html' %}
{% load static %}
{% load jalali_tags %}

{% block page_title %}
product list
{% endblock %}

{% block link %}
<link rel="stylesheet" href="{% static 'css/respansive.css' %}">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
<link rel="stylesheet" href="{% static 'style.css' %}">
<!--refrence carousel-->
<link rel="stylesheet" href="{% static 'css/owlcarousel/owl.carousel.min.css' %}">
<link rel="stylesheet" href="{% static 'css/owlcarousel/owl.theme.default.min.css' %}">
<!--refrence carousel-->
<link rel="stylesheet" href="{% static 'css/all.min.css' %}">
{% endblock %}

{% block content %}
<div class="content shop sidebar left-sidebar">
    <section>
        <div class="container">
            <div class="row">
                <div class="col-12 col-lg-9 py-5 pe-lg-5 order-2 order-lg-2">
                    <div class="area-content-bySidebar">
                        <nav aria-label="breadcrumb" class="mb-4 pb-2">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a href="{% url 'Home:HomeView' %}">خانه</a></li>
                                <li class="breadcrumb-item"><a href="{% url 'products:product_list' %}">فروشگاه</a>
                                </li>
                                <li class="breadcrumb-item active" aria-current="page">شبکه ای بدون سایدبار</li>
                            </ol>
                        </nav>
                        <div
                                class="area-select-sort-NumberProductPerPage d-flex justify-content-between align-items-center mb-3">
                            <div class="box-select-sort d-flex align-items-center justify-content-end mb-4">
                                <select class="form-select custom-select ms-3" id="select-sort"
                                        aria-label="Default select example" onchange='Location = this.value'>
                                    <option selected>براساس محبوبیت</option>
                                    <option value="1">براساس جدید بودن</option>
                                    <option value="{% url 'products:product_list' %}">براساس قیمت: کم به زیاد</option>
                                    <option value="3">براساس قیمت: زیاد به کم</option>
                                </select>
                                <label class="lable-select-sort d-none d-sm-block"
                                       for="select-sort">از {{ products | length }} محصول
                                </label>
                            </div>
                            <div
                                    class="box-select-NumberProduct-the-page d-none  d-md-flex align-items-center justify-content-end mb-4">
                                <label class="lable-select-NumberProduct-the-page"
                                       for="select-NumberProduct-the-page">نمایش </label>
                                <select class="form-select custom-select mx-3" id="select-NumberProduct-the-page"
                                        aria-label="Default select example">
                                    <option selected>12</option>
                                    <option value="1">24</option>
                                    <option value="2">36</option>
                                    <option value="3">48</option>
                                </select>
                                <span>محصول در صفحه</span>
                            </div>
                        </div>
                        <div class="area-all-product mb-4">
                            <div class="row">
                                <div
                                        class="col-12   col-sm-6 col-md-4 col-lg-3 mb_col_productNew d-flex justify-content-center">

                                </div>

                                {% for product in page_obj %}
                                {% if 'result' in request.get_full_path %}
                                <div class="col-12  col-sm-6 col-md-4 col-lg-3 mb_col_productNew d-flex justify-content-center">
                                    <div class="product_cart">
                                        <a href="{% url 'products:product_detail' product.id %}"
                                           class="card_product_img"><img
                                                src="{{ product.cover.url }}"
                                                class="img-fluid"/></a>
                                        <div class="body_card_product text-right">
                                            <a href="{% url 'products:product_detail' product.id %}">
                                                {{ product.title }}
                                                <h3></h3>
                                            </a>
                                            <div class="price_card_product">
                                                <del
                                                        class="ms-1"> {{ product.price }}تومان
                                                </del>
                                                <span>
                                                            {{ product.second_price }}تومان</span>
                                            </div>
                                        </div>
                                        <div
                                                class="card_footer_product d-flex justify-content-between align-items-center">
                                            <div class="star_rating">
                                                {% if product.star == "1" %}
                                                <span class="star-icon star-icon-active"><i
                                                        class="far fa-star"></i></span>
                                                <span class="star-icon"><i
                                                        class="far fa-star"></i></span>
                                                <span class="star-icon"><i
                                                        class="far fa-star"></i></span>
                                                <span class="star-icon"><i
                                                        class="far fa-star"></i></span>
                                                <span class="star-icon"><i
                                                        class="far fa-star"></i></span>
                                                {% endif %}
                                                {% if product.star == "2" %}
                                                <span class="star-icon star-icon-active"><i
                                                        class="far fa-star"></i></span>
                                                <span class="star-icon star-icon-active"><i
                                                        class="far fa-star"></i></span>
                                                <span class="star-icon"><i
                                                        class="far fa-star"></i></span>
                                                <span class="star-icon"><i
                                                        class="far fa-star"></i></span>
                                                <span class="star-icon"><i
                                                        class="far fa-star"></i></span>
                                                {% endif %}
                                                {% if product.star == "3" %}
                                                <span class="star-icon star-icon-active"><i
                                                        class="far fa-star"></i></span>
                                                <span class="star-icon star-icon-active"><i
                                                        class="far fa-star"></i></span>
                                                <span class="star-icon star-icon-active"><i
                                                        class="far fa-star"></i></span>
                                                <span class="star-icon"><i
                                                        class="far fa-star"></i></span>
                                                <span class="star-icon"><i
                                                        class="far fa-star"></i></span>

                                                {% endif %}
                                                {% if product.star == "4" %}
                                                <span class="star-icon star-icon-active"><i
                                                        class="far fa-star"></i></span>
                                                <span class="star-icon star-icon-active"><i
                                                        class="far fa-star"></i></span>
                                                <span class="star-icon star-icon-active"><i
                                                        class="far fa-star"></i></span>
                                                <span class="star-icon star-icon-active"><i
                                                        class="far fa-star"></i></span>
                                                <span class="star-icon"><i
                                                        class="far fa-star"></i></span>


                                                {% endif %}
                                                {% if product.star == "5" %}
                                                <span class="star-icon star-icon-active"><i
                                                        class="far fa-star"></i></span>
                                                <span class="star-icon star-icon-active"><i
                                                        class="far fa-star"></i></span>
                                                <span class="star-icon star-icon-active"><i
                                                        class="far fa-star"></i></span>
                                                <span class="star-icon star-icon-active"><i
                                                        class="far fa-star"></i></span>
                                                <span class="star-icon star-icon-active"><i
                                                        class="far fa-star"></i></span>
                                                {% endif %}
                                            </div>
                                            <div class="area_icon_cardFooter d-flex align-items-center">
                                                <a href="{% url 'cart:add_to_cart' product.id %}"
                                                   class="border-left"><i
                                                        class="fal fa-cart-plus"></i><span
                                                        class="tooltip-site"> سبد
                                                            خرید </span></a>
                                                <a href="{% url 'favorite:add_to_favorite' product.id %}"><i
                                                        class="fal fa-heart"></i><span class="tooltip-site">
                                                            علاقه مندی ها</span></a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                {% else %}
                                <div class="col-12  col-sm-6 col-md-4 col-lg-3 mb_col_productNew d-flex justify-content-center">
                                    <div class="product_cart">
                                        <a href="{% url 'products:product_detail' product.id %}"
                                           class="card_product_img"><img src="{{ product.cover.url }}"
                                                                         class="img-fluid"/></a>
                                        <div class="body_card_product text-right">
                                            <a href="{% url 'products:product_detail' product.id %}">
                                                {{ product.title }}
                                                <h3></h3>
                                            </a>
                                            <a href="{% url 'products:product_detail' product.id %}">
                                                <i class='bx bxs-bell-plus'></i>
                                                {{ product.inventory }} تا در انبار
                                                <h3></h3>
                                            </a>
                                            <div class="price_card_product">


                                                {% if product.discouont > 0 %}
                                                <del
                                                        class="ms-1"> {{ product.price }}تومان
                                                </del>
                                                <span> {{ product.second_price }} تومان</span>
                                                {% else %}
                                                <span> {{ product.price }} تومان</span>
                                                {% endif %}

                                            </div>
                                        </div>
                                        <div
                                                class="card_footer_product d-flex justify-content-between align-items-center">
                                            <div class="star_rating">
                                                {% if product.star == "1" %}
                                                <span class="star-icon star-icon-active"><i
                                                        class="far fa-star"></i></span>
                                                <span class="star-icon"><i
                                                        class="far fa-star"></i></span>
                                                <span class="star-icon"><i
                                                        class="far fa-star"></i></span>
                                                <span class="star-icon"><i
                                                        class="far fa-star"></i></span>
                                                <span class="star-icon"><i
                                                        class="far fa-star"></i></span>
                                                {% endif %}
                                                {% if product.star == "2" %}
                                                <span class="star-icon star-icon-active"><i
                                                        class="far fa-star"></i></span>
                                                <span class="star-icon star-icon-active"><i
                                                        class="far fa-star"></i></span>
                                                <span class="star-icon"><i
                                                        class="far fa-star"></i></span>
                                                <span class="star-icon"><i
                                                        class="far fa-star"></i></span>
                                                <span class="star-icon"><i
                                                        class="far fa-star"></i></span>
                                                {% endif %}
                                                {% if product.star == "3" %}
                                                <span class="star-icon star-icon-active"><i
                                                        class="far fa-star"></i></span>
                                                <span class="star-icon star-icon-active"><i
                                                        class="far fa-star"></i></span>
                                                <span class="star-icon star-icon-active"><i
                                                        class="far fa-star"></i></span>
                                                <span class="star-icon"><i
                                                        class="far fa-star"></i></span>
                                                <span class="star-icon"><i
                                                        class="far fa-star"></i></span>

                                                {% endif %}
                                                {% if product.star == "4" %}
                                                <span class="star-icon star-icon-active"><i
                                                        class="far fa-star"></i></span>
                                                <span class="star-icon star-icon-active"><i
                                                        class="far fa-star"></i></span>
                                                <span class="star-icon star-icon-active"><i
                                                        class="far fa-star"></i></span>
                                                <span class="star-icon star-icon-active"><i
                                                        class="far fa-star"></i></span>
                                                <span class="star-icon"><i
                                                        class="far fa-star"></i></span>


                                                {% endif %}
                                                {% if product.star == "5" %}
                                                <span class="star-icon star-icon-active"><i
                                                        class="far fa-star"></i></span>
                                                <span class="star-icon star-icon-active"><i
                                                        class="far fa-star"></i></span>
                                                <span class="star-icon star-icon-active"><i
                                                        class="far fa-star"></i></span>
                                                <span class="star-icon star-icon-active"><i
                                                        class="far fa-star"></i></span>
                                                <span class="star-icon star-icon-active"><i
                                                        class="far fa-star"></i></span>
                                                {% endif %}
                                            </div>
                                            <div class="area_icon_cardFooter d-flex align-items-center">
                                                <a href="{% url 'cart:add_to_cart' product.id %}"
                                                   class="border-left"><i
                                                        class="fal fa-cart-plus"></i><span
                                                        class="tooltip-site"> سبد
                                                            خرید </span></a>
                                                <a href="{% url 'favorite:add_to_favorite' product.id %}"><i
                                                        class="fal fa-heart"></i><span class="tooltip-site">
                                                            علاقه مندی ها</span></a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                {% endif %}

                                {% endfor %}


                            </div>
                        </div>
                        <div
                                class="area-pageination-shop  d-flex  flex-column flex-md-row justify-content-between align-items-center mb-4">
                            <ul class="pagination pagination-lg d-flex justify-content-center order-2 order-md-1">

                                {% if page_obj.has_previous %}
                                <li class="page-item ms-2"><a class="page-link"
                                                              href="?page={{ page_obj.previous_page_number }}"
                                                              aria-label="Previous"><i
                                        class="fas fa-chevron-right"></i></a></li>
                                <li class="page-item"><a class="page-link" href="#">{{ page_obj.previous_page_number
                                    }}</a></li>
                                {% endif %}
                                <li class="page-item"><a class="page-link" href="#">{{ page_obj.number }}</a></li>
                                {% if page_obj.has_next %}
                                <li class="page-item"><a class="page-link" href="#">{{ page_obj.next_page_number }}</a>
                                </li>
                                <li class="page-item me-2"><a class="page-link"
                                                              href="?page={{ page_obj.next_page_number }}"
                                                              aria-label="Next"><i
                                        class="fas fa-chevron-left"></i></a></li>


                                {% endif %}
                            </ul>
                            <div
                                    class="box-select-NumberProduct-the-page d-flex align-items-center justify-content-center justify-content-md-end mb-4 mb-md-0 pb-2 pb-md-0  order-1 order-md-2">
                                <label class="lable-select-NumberProduct-the-page"
                                       for="select-NumberProduct-the-page">نمایش </label>
                                <select class="form-select custom-select mx-3" id="select-NumberProduct-the-page"
                                        aria-label="Default select example">
                                    <option selected>12</option>
                                    <option value="1">24</option>
                                    <option value="2">36</option>
                                    <option value="3">48</option>
                                </select>
                                <span>محصول در صفحه</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="d-none d-lg-block col-3 pt-5  pe-lg-3 ps-lg-0 pe-xl-0 ps-xl-4  order-1 order-lg-1">
                    <div class="area-sidebar">
                        <div class="widget-sidebar mb-5" id="accordian">
                            <header>
                                <h3 class="title-widget-sidebar mb-3">دسته بندی</h3>
                            </header>
                            <section>
                                <ul class="menu-multi-level menu-categorySidebar">
                                    {% for item in category %}
                                        <li class="menu-item-has-children"><a href="{%  url 'products:product_category' item.name %}"> {{item.name}} <span
                                                class="badge-sidebar-shop">{{item.length}}</span></a>
                                        </li>
                                    {% endfor %}
                                </ul>
                            </section>
                        </div>


                    </div>
                </div>
            </div>
        </div>
    </section>
</div>
{% endblock %}